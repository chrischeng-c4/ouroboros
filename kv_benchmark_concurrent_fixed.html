<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>KV Store Concurrent Performance (Fixed)</title>
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
    <style>
        * { box-sizing: border-box; margin: 0; padding: 0; }
        body {
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif;
            background: #0d1117; color: #c9d1d9; padding: 2rem;
        }
        .container { max-width: 1200px; margin: 0 auto; }
        h1 { color: #58a6ff; margin-bottom: 0.5rem; }
        h2 { color: #8b949e; margin: 2rem 0 1rem; border-bottom: 1px solid #30363d; padding-bottom: 0.5rem; }
        .description { color: #8b949e; margin-bottom: 2rem; }
        .meta { display: flex; gap: 2rem; margin-bottom: 2rem; flex-wrap: wrap; }
        .meta-item { background: #161b22; padding: 1rem; border-radius: 6px; border: 1px solid #30363d; }
        .meta-label { color: #8b949e; font-size: 0.85rem; }
        .meta-value { color: #c9d1d9; font-size: 1.1rem; font-weight: 600; }
        .group { background: #161b22; border-radius: 8px; padding: 1.5rem; margin-bottom: 2rem; border: 1px solid #30363d; }
        .group-title { color: #58a6ff; margin-bottom: 1rem; }
        .chart-container { height: 300px; margin-bottom: 1.5rem; }
        table { width: 100%; border-collapse: collapse; margin-top: 1rem; }
        th, td { padding: 0.75rem; text-align: left; border-bottom: 1px solid #30363d; }
        th { color: #8b949e; font-weight: 500; }
        td { color: #c9d1d9; }
        .faster { color: #3fb950; }
        .slower { color: #f85149; }
        .baseline { color: #8b949e; }
        .number { font-family: 'SF Mono', Monaco, monospace; }
        .env { display: grid; grid-template-columns: repeat(auto-fit, minmax(200px, 1fr)); gap: 1rem; margin-top: 1rem; }
        .env-item { background: #0d1117; padding: 0.75rem; border-radius: 4px; }
        footer { margin-top: 3rem; text-align: center; color: #8b949e; font-size: 0.85rem; }
    </style>
</head>
<body>
    <div class="container">
        <h1>KV Store Concurrent Performance (Fixed)</h1>
        <p class="description">Corrected concurrent benchmarks measuring actual throughput without thread spawning overhead</p>
        <div class="meta">
            <div class="meta-item"><div class="meta-label">Generated</div><div class="meta-value">2026-01-06 09:45:10</div></div>
            <div class="meta-item"><div class="meta-label">Total Duration</div><div class="meta-value">2.95s</div></div>
            <div class="meta-item"><div class="meta-label">Groups</div><div class="meta-value">4</div></div>
            <div class="meta-item"><div class="meta-label">Benchmarks</div><div class="meta-value">12</div></div>
        </div>

        <div class="group">
            <h2 class="group-title">Concurrent SET Operations</h2>
            <div class="chart-container"><canvas id="chart0"></canvas></div>
            <table>
                <tr><th>Benchmark</th><th>Mean</th><th>Min</th><th>Max</th><th>Stddev</th><th>Ops/s</th><th>vs Baseline</th></tr>
                <tr><td>set_2_threads</td><td class="number">45.959ms</td><td class="number">39.357ms</td><td class="number">52.832ms</td><td class="number">5.431ms</td><td class="number">21.8</td><td><span class="baseline">(baseline)</span></td></tr>
                <tr><td>set_4_threads</td><td class="number">61.233ms</td><td class="number">52.840ms</td><td class="number">72.716ms</td><td class="number">7.571ms</td><td class="number">16.3</td><td><span class="slower">1.33x slower</span></td></tr>
                <tr><td>set_8_threads</td><td class="number">82.703ms</td><td class="number">73.533ms</td><td class="number">88.727ms</td><td class="number">7.193ms</td><td class="number">12.1</td><td><span class="slower">1.80x slower</span></td></tr>
            </table>
        </div>

        <div class="group">
            <h2 class="group-title">Concurrent GET Operations</h2>
            <div class="chart-container"><canvas id="chart1"></canvas></div>
            <table>
                <tr><th>Benchmark</th><th>Mean</th><th>Min</th><th>Max</th><th>Stddev</th><th>Ops/s</th><th>vs Baseline</th></tr>
                <tr><td>get_2_threads</td><td class="number">28.046ms</td><td class="number">23.525ms</td><td class="number">33.458ms</td><td class="number">3.798ms</td><td class="number">35.7</td><td><span class="baseline">(baseline)</span></td></tr>
                <tr><td>get_4_threads</td><td class="number">34.852ms</td><td class="number">31.855ms</td><td class="number">38.713ms</td><td class="number">2.828ms</td><td class="number">28.7</td><td><span class="slower">1.24x slower</span></td></tr>
                <tr><td>get_8_threads</td><td class="number">37.203ms</td><td class="number">29.175ms</td><td class="number">40.290ms</td><td class="number">4.536ms</td><td class="number">26.9</td><td><span class="slower">1.33x slower</span></td></tr>
            </table>
        </div>

        <div class="group">
            <h2 class="group-title">Concurrent INCR Operations (Atomic)</h2>
            <div class="chart-container"><canvas id="chart2"></canvas></div>
            <table>
                <tr><th>Benchmark</th><th>Mean</th><th>Min</th><th>Max</th><th>Stddev</th><th>Ops/s</th><th>vs Baseline</th></tr>
                <tr><td>incr_2_threads</td><td class="number">12.776ms</td><td class="number">10.746ms</td><td class="number">15.572ms</td><td class="number">1.746ms</td><td class="number">78.3</td><td><span class="baseline">(baseline)</span></td></tr>
                <tr><td>incr_4_threads</td><td class="number">33.058ms</td><td class="number">29.195ms</td><td class="number">42.522ms</td><td class="number">5.383ms</td><td class="number">30.3</td><td><span class="slower">2.59x slower</span></td></tr>
                <tr><td>incr_8_threads</td><td class="number">62.966ms</td><td class="number">54.383ms</td><td class="number">72.808ms</td><td class="number">7.703ms</td><td class="number">15.9</td><td><span class="slower">4.93x slower</span></td></tr>
            </table>
        </div>

        <div class="group">
            <h2 class="group-title">Concurrent Mixed Workload (50% GET, 50% SET)</h2>
            <div class="chart-container"><canvas id="chart3"></canvas></div>
            <table>
                <tr><th>Benchmark</th><th>Mean</th><th>Min</th><th>Max</th><th>Stddev</th><th>Ops/s</th><th>vs Baseline</th></tr>
                <tr><td>mixed_2_threads</td><td class="number">26.997ms</td><td class="number">24.099ms</td><td class="number">34.999ms</td><td class="number">4.513ms</td><td class="number">37.0</td><td><span class="baseline">(baseline)</span></td></tr>
                <tr><td>mixed_4_threads</td><td class="number">75.159ms</td><td class="number">50.412ms</td><td class="number">115.873ms</td><td class="number">29.610ms</td><td class="number">13.3</td><td><span class="slower">2.78x slower</span></td></tr>
                <tr><td>mixed_8_threads</td><td class="number">88.084ms</td><td class="number">80.108ms</td><td class="number">113.411ms</td><td class="number">14.260ms</td><td class="number">11.4</td><td><span class="slower">3.26x slower</span></td></tr>
            </table>
        </div>

        <h2>Environment</h2>
        <div class="env">
            <div class="env-item"><strong>Rust:</strong> </div>
            <div class="env-item"><strong>Platform:</strong> macos</div>
            <div class="env-item"><strong>CPU:</strong> 10 cores</div>
            <div class="env-item"><strong>Host:</strong> HW32H3YK3X</div>
        </div>

        <footer>Generated by data-bridge-test benchmark framework</footer>
    </div>

    <script>

        new Chart(document.getElementById('chart0'), {
            type: 'bar',
            data: {
                labels: ['set_2_threads', 'set_4_threads', 'set_8_threads'],
                datasets: [
                    { label: 'Mean (ms)', data: [45.959, 61.233, 82.703], backgroundColor: 'rgba(88, 166, 255, 0.8)' },
                    { label: 'Min (ms)', data: [39.357, 52.840, 73.533], backgroundColor: 'rgba(63, 185, 80, 0.6)' },
                    { label: 'Max (ms)', data: [52.832, 72.716, 88.727], backgroundColor: 'rgba(248, 81, 73, 0.6)' }
                ]
            },
            options: {
                responsive: true,
                maintainAspectRatio: false,
                plugins: { legend: { labels: { color: '#c9d1d9' } } },
                scales: {
                    x: { ticks: { color: '#8b949e' }, grid: { color: '#30363d' } },
                    y: { ticks: { color: '#8b949e' }, grid: { color: '#30363d' }, title: { display: true, text: 'Time (ms)', color: '#8b949e' } }
                }
            }
        });

        new Chart(document.getElementById('chart1'), {
            type: 'bar',
            data: {
                labels: ['get_2_threads', 'get_4_threads', 'get_8_threads'],
                datasets: [
                    { label: 'Mean (ms)', data: [28.046, 34.852, 37.203], backgroundColor: 'rgba(88, 166, 255, 0.8)' },
                    { label: 'Min (ms)', data: [23.525, 31.855, 29.175], backgroundColor: 'rgba(63, 185, 80, 0.6)' },
                    { label: 'Max (ms)', data: [33.458, 38.713, 40.290], backgroundColor: 'rgba(248, 81, 73, 0.6)' }
                ]
            },
            options: {
                responsive: true,
                maintainAspectRatio: false,
                plugins: { legend: { labels: { color: '#c9d1d9' } } },
                scales: {
                    x: { ticks: { color: '#8b949e' }, grid: { color: '#30363d' } },
                    y: { ticks: { color: '#8b949e' }, grid: { color: '#30363d' }, title: { display: true, text: 'Time (ms)', color: '#8b949e' } }
                }
            }
        });

        new Chart(document.getElementById('chart2'), {
            type: 'bar',
            data: {
                labels: ['incr_2_threads', 'incr_4_threads', 'incr_8_threads'],
                datasets: [
                    { label: 'Mean (ms)', data: [12.776, 33.058, 62.966], backgroundColor: 'rgba(88, 166, 255, 0.8)' },
                    { label: 'Min (ms)', data: [10.746, 29.195, 54.383], backgroundColor: 'rgba(63, 185, 80, 0.6)' },
                    { label: 'Max (ms)', data: [15.572, 42.522, 72.808], backgroundColor: 'rgba(248, 81, 73, 0.6)' }
                ]
            },
            options: {
                responsive: true,
                maintainAspectRatio: false,
                plugins: { legend: { labels: { color: '#c9d1d9' } } },
                scales: {
                    x: { ticks: { color: '#8b949e' }, grid: { color: '#30363d' } },
                    y: { ticks: { color: '#8b949e' }, grid: { color: '#30363d' }, title: { display: true, text: 'Time (ms)', color: '#8b949e' } }
                }
            }
        });

        new Chart(document.getElementById('chart3'), {
            type: 'bar',
            data: {
                labels: ['mixed_2_threads', 'mixed_4_threads', 'mixed_8_threads'],
                datasets: [
                    { label: 'Mean (ms)', data: [26.997, 75.159, 88.084], backgroundColor: 'rgba(88, 166, 255, 0.8)' },
                    { label: 'Min (ms)', data: [24.099, 50.412, 80.108], backgroundColor: 'rgba(63, 185, 80, 0.6)' },
                    { label: 'Max (ms)', data: [34.999, 115.873, 113.411], backgroundColor: 'rgba(248, 81, 73, 0.6)' }
                ]
            },
            options: {
                responsive: true,
                maintainAspectRatio: false,
                plugins: { legend: { labels: { color: '#c9d1d9' } } },
                scales: {
                    x: { ticks: { color: '#8b949e' }, grid: { color: '#30363d' } },
                    y: { ticks: { color: '#8b949e' }, grid: { color: '#30363d' }, title: { display: true, text: 'Time (ms)', color: '#8b949e' } }
                }
            }
        });
    </script>
</body>
</html>